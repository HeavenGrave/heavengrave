<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文章上传与管理系统</title>
    <!-- 引入外部资源 -->
    <script src="static/js/tailwindcss/tailwindcss.js"></script>
    <link href="static/common/bootstrap/css/bootstrap.css" rel="stylesheet">
    <script src="static/common/jquery/jquery.min.js"></script>
    <script src="static/common/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/axios/axios.js"></script>
    <!-- FontAwesome CSS-->
    <link href="static/common/font-awesom/css/all.min.css" rel="stylesheet">
    <script src="static/common/bootstrap-table/js/bootstrap-table.min.js"></script>
    <link rel="stylesheet" href="static/common/bootstrap-table/css/bootstrap-table.min.css">
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36CFC9',
                        neutral: '#86909C',
                        light: '#F2F3F5',
                        dark: '#1D2129'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            }
        }
    </script>
    <link href="static/css/novelUpload/style.css" rel="stylesheet">
</head>

<body class="bg-gray-50 font-inter text-dark">
<div class="loading">
    <div class="loader"></div>
</div>
<!-- 顶部导航栏 -->
<nav class="bg-white shadow-sm nav-height flex items-center px-4">
    <div class="container mx-auto flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <i class="fas fa-file-alt text-primary text-xl"></i>
            <h1 class="text-lg font-semibold">文章管理系统</h1>
        </div>
        <div>
            <button id="resetBtn" class="text-neutral hover:text-primary transition-colors">
                <i class="fas fa-sync-alt me-1"></i>重置
            </button>
        </div>
    </div>
</nav>

<div class="container mx-auto px-4 py-5">
    <!-- 上传区域 -->
    <div class="mb-6">
        <h2 class="title-height text-base font-medium text-dark mb-3 flex items-center">
            <i class="fas fa-cloud-upload-alt text-primary mr-2"></i>文件上传
        </h2>

        <div id="uploadArea" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center upload-hover">
            <input type="file" id="fileInput" accept=".txt" class="hidden"/>
            <i class="fas fa-file-text text-5xl text-gray-400 mb-3"></i>
            <p class="text-gray-500 mb-4">拖拽TXT文件到此处，或<span class="text-primary cursor-pointer" id="browseBtn">点击上传</span>
            </p>
            <p class="text-xs text-gray-400">支持单个TXT文件，最大50MB</p>

            <!-- 上传进度条 -->
            <div id="progressContainer" class="hidden mt-4">
                <div class="progress h-2 mb-1">
                    <div id="progressBar" class="progress-bar bg-primary" role="progressbar" style="width: 0%"
                         aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <p id="progressText" class="text-sm text-gray-500">上传中: 0%</p>
            </div>
        </div>
    </div>

    <!-- 统计面板 -->
    <div id="statsPanel" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 hidden">
        <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-primary">
            <p class="text-neutral text-sm">章节数</p>
            <div class="flex items-center mt-1">
                <span id="chapterCount" class="text-xl font-semibold">0</span>
                <i class="fas fa-list-ol text-primary ml-2"></i>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-secondary">
            <p class="text-neutral text-sm">总句数</p>
            <div class="flex items-center mt-1">
                <span id="sentenceCount" class="text-xl font-semibold">0</span>
                <i class="fas fa-quote-right text-secondary ml-2"></i>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-amber-500">
            <p class="text-neutral text-sm">文件大小</p>
            <div class="flex items-center mt-1">
                <span id="fileSize" class="text-xl font-semibold">0</span>
                <span class="text-sm ml-1">MB</span>
                <i class="fas fa-hdd text-amber-500 ml-2"></i>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-purple-500">
            <p class="text-neutral text-sm">处理时间</p>
            <div class="flex items-center mt-1">
                <span id="processTime" class="text-xl font-semibold">0</span>
                <span class="text-sm ml-1">秒</span>
                <i class="fas fa-clock text-purple-500 ml-2"></i>
            </div>
        </div>
    </div>

    <!-- 表格区域 -->
    <div id="tableContainer" class="bg-white rounded-lg shadow-sm mb-6 hidden">
        <h2 class="title-height text-base font-medium text-dark px-4 pt-3 pb-1 flex items-center">
            <i class="fas fa-table text-primary mr-2"></i>文章列表
        </h2>
        <div class="border-t px-4">
            <table id="articleTable"
                   data-toggle="table"
                   data-search="true"
                   data-pagination="true"
                   data-page-size="10"
                   data-page-list="[5, 10, 20, 50]"
                   data-show-columns="true"
                   data-show-refresh="true">
                <thead>
                <tr>
                    <th data-field="chapterNum" data-sortable="true">章节号</th>
                    <th data-field="novelName" data-sortable="true">文章名称</th>
                    <th data-field="index" data-sortable="true">Index</th>
<!--                    <th data-field="actor" data-sortable="true">角色</th>-->
                    <th data-field="content" data-sortable="true">内容</th>
                    <th data-field="actions" data-formatter="actionFormatter" data-events="actionEvents">操作</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- 查看内容模态框 -->
<div class="modal fade" id="viewModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewModalTitle">查看内容</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <pre id="contentView" class="whitespace-pre-wrap break-words p-3 bg-gray-50 rounded"></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 编辑模态框 -->
<div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalTitle">编辑内容</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editId"/>
                <div class="mb-3">
                    <label for="editActor" class="form-label">角色</label>
                    <input type="text" class="form-control" id="editActor" placeholder="输入角色信息">
                </div>
                <div class="mb-3">
                    <label for="editContent" class="form-label">内容</label>
                    <textarea class="form-control" id="editContent" rows="8" placeholder="输入文章内容"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="saveEditBtn">保存</button>
            </div>
        </div>
    </div>
</div>

<script src="static/js/novelUpload/novelUpload.js"></script>
</body>
</html>
