<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>装修花费记录管理</title>
    <!-- 引入外部资源 -->
    <script src="static/js/tailwindcss/tailwindcss.js"></script>
    <!-- FontAwesome CSS-->
    <link href="static/common/font-awesom/css/all.min.css" rel="stylesheet">
    <!-- echarts.js -->
    <script src="static/common/echarts/echarts.js"></script>
    <!-- Common JS-->
    <script type="text/javascript" src="static/common/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="static/js/axios/axios.js"></script>
    <!-- 配置Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        danger: '#EF4444',
                        neutral: '#64748B',
                        light: '#F1F5F9',
                        dark: '#1E293B'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                },
            }
        }
    </script>
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .shadow-soft {
                box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            }
            .transition-custom {
                transition: all 0.3s ease;
            }
        }
    </style>
    <link rel="stylesheet" href="static/css/renovation/style.css">
    <script type="text/javascript" src="static/js/renovation/renovation.js"></script>
</head>

<body class="font-sans text-dark">
<!-- 顶部导航栏 -->
<header class="bg-white shadow-md sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <i class="fa fa-home text-primary text-2xl"></i>
            <h1 class="text-xl md:text-2xl font-bold text-dark">装修花费记录管理</h1>
        </div>
        <div class="flex items-center space-x-4">
            <button id="theme-toggle" class="p-2 rounded-full hover:bg-light transition-custom">
                <i class="fa fa-moon-o text-neutral"></i>
            </button>
            <button id="help-btn" class="p-2 rounded-full hover:bg-light transition-custom">
                <i class="fa fa-question-circle text-neutral"></i>
            </button>
        </div>
    </div>
</header>

<main class="container mx-auto px-4 py-6 md:py-8">
    <!-- 概览卡片 -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div class="bg-white rounded-xl shadow-soft p-5 transform hover:scale-[1.02] transition-custom">
            <div class="flex justify-between items-start">
                <div>
                    <p class="text-neutral text-sm">总记录数</p>
                    <h3 id="total-records" class="text-2xl font-bold mt-1">0</h3>
                </div>
                <div class="bg-primary/10 p-3 rounded-lg">
                    <i class="fa fa-list-alt text-primary text-xl"></i>
                </div>
            </div>
            <div class="mt-4 text-xs text-neutral">
                <span>较昨日 <span class="text-secondary" id="addRecordNum"><i class="fa fa-arrow-up"></i> 0</span></span>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-soft p-5 transform hover:scale-[1.02] transition-custom">
            <div class="flex justify-between items-start">
                <div>
                    <p class="text-neutral text-sm">总花费</p>
                    <h3 id="total-amount" class="text-2xl font-bold mt-1">¥0</h3>
                </div>
                <div class="bg-accent/10 p-3 rounded-lg">
                    <i class="fa fa-rmb text-accent text-xl"></i>
                </div>
            </div>
            <div class="mt-4 text-xs text-neutral">
                <span>本月累计 <span class="text-accent" id="total-amount-month">¥0</span></span>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-soft p-5 transform hover:scale-[1.02] transition-custom">
            <div class="flex justify-between items-start">
                <div>
                    <p class="text-neutral text-sm">品牌数量</p>
                    <h3 id="category-count" class="text-2xl font-bold mt-1">0</h3>
                </div>
                <div class="bg-secondary/10 p-3 rounded-lg">
                    <i class="fa fa-tags text-secondary text-xl"></i>
                </div>
            </div>
            <div class="mt-4 text-xs text-neutral">
                <span>常用品牌 <span class="text-secondary">小米、美的</span></span>
            </div>
        </div>
    </div>

    <!-- 操作和筛选区 -->
    <div class="bg-white rounded-xl shadow-soft p-4 md:p-6 mb-6">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
            <h2 class="text-lg font-semibold">花费记录管理</h2>
            <button id="add-record-btn" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-custom w-full md:w-auto">
                <i class="fa fa-plus"></i>
                <span>新增记录</span>
            </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-5 gap-4" style="grid-template-columns: 1fr 1fr 1fr 1fr 190px;">
            <div>
                <label class="block text-sm font-medium text-neutral mb-1">品牌筛选</label>
                <select id="brand-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-neutral mb-1">状态筛选</label>
                <select id="status-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                    <option value="all" selected>全部状态</option>
                    <option value="已下单">已下单</option>
                    <option value="运输中">运输中</option>
                    <option value="已延期">已延期</option>
                    <option value="已收货">已收货</option>
                    <option value="已使用">已使用</option>
                    <option value="已完成">已完成</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-neutral mb-1">时间排序</label>
                <select id="time-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                    <option value="asc" >由早到晚</option>
                    <option value="desc" selected>由晚到早</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium text-neutral mb-1">关键词搜索</label>
                <div class="relative">
                    <input type="text" id="keyword-search" placeholder="品类/型号/备注搜索" class="w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                    <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-neutral"></i>
                </div>
            </div>

            <div class="flex items-end gap-2">
                <button id="search-btn" class="flex-1 bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-custom">
                    <i class="fa fa-filter mr-1"></i> 查询
                </button>
                <button id="reset-btn" class="flex-1 border border-gray-300 hover:bg-light px-4 py-2 rounded-lg transition-custom">
                    重置
                </button>
            </div>
        </div>
    </div>

    <!-- 表格和统计区域 -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- 表格区域 -->
        <div class="lg:col-span-2">
            <div class="bg-white rounded-xl shadow-soft overflow-hidden">
                <div class="p-4 md:p-6 border-b border-gray-100">
                    <h2 class="text-lg font-semibold">花费记录列表</h2>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                        <tr class="bg-light">
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">品类/品牌</th>
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">型号/规格</th>
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">状态</th>
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">价格</th>
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">数量/单位</th>
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">总计</th>
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">时间</th>
                            <th class="px-3 py-2 text-left text-xs font-medium text-neutral uppercase tracking-wider">操作</th>
                        </tr>
                        </thead>
                        <tbody id="records-table-body">
                        <!-- 表格内容将通过JavaScript动态生成 -->
                        <tr class="table-row">
                            <td colspan="8" class="px-4 py-8 text-center text-neutral">
                                <div class="flex flex-col items-center">
                                    <i class="fa fa-folder-open-o text-4xl mb-2 text-gray-300"></i>
                                    <p>暂无记录，请点击"新增记录"添加</p>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="p-4 border-t border-gray-100 flex justify-between items-center">
                    <div class="text-sm text-neutral">
                        显示 <span id="shown-count">0</span> 条，共 <span id="total-count">0</span> 条
                    </div>
                    <div class="flex gap-2">
                        <button id="export-btn" class="text-primary hover:text-primary/80 text-sm px-3 py-1 rounded border border-primary/30 transition-custom">
                            <i class="fa fa-download mr-1"></i> 导出数据
                        </button>
                        <!--<button id="clear-all-btn" class="text-danger hover:text-danger/80 text-sm px-3 py-1 rounded border border-danger/30 transition-custom">
                            <i class="fa fa-trash mr-1"></i> 清空记录
                        </button>-->
                    </div>
                </div>
            </div>
        </div>

        <!-- 统计区域 -->
        <div class="lg:col-span-1">
            <div class="bg-white rounded-xl shadow-soft overflow-hidden h-full">
                <div class="p-4 md:p-6 border-b border-gray-100">
                    <h2 class="text-lg font-semibold">花费统计分析</h2>
                </div>
                <div class="p-2" style="min-height: 600px;">
                    <!-- 图表容器 -->
                    <div class="mb-0 h-64" style="height:300px;">
<!--                        <canvas id="category-chart"></canvas>-->
                        <div id="chart_num" style="width:100%;height:360px;"></div>
                    </div>
                    <div class="mb-0 h-64" style="height:300px;">
                        <div id="chart_price" style="width:100%;height:360px;"></div>
                    </div>

                    <!-- 统计数据列表 -->
<!--                    <div class="space-y-3 max-h-[300px] overflow-y-auto pr-2">-->
<!--                        <h3 class="text-sm font-medium text-neutral mb-2">品类花费详情</h3>-->
<!--                        <div id="category-stats" class="space-y-2">-->
<!--                            &lt;!&ndash; 统计数据将通过JavaScript动态生成 &ndash;&gt;-->
<!--                        </div>-->
<!--                    </div>-->
                </div>
            </div>
        </div>
    </div>
</main>

<!-- 页脚 -->
<footer class="bg-white border-t border-gray-200 mt-10 py-6">
    <div class="container mx-auto px-4 text-center text-neutral text-sm">
        <p>装修花费记录管理系统 &copy; 2025 版权所有</p>
    </div>
</footer>

<!-- 新增/编辑记录模态框 -->
<div id="record-modal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto transform transition-all">
        <div class="p-5 border-b border-gray-100 flex justify-between items-center sticky top-0 bg-white z-10">
            <h3 id="modal-title" class="text-lg font-semibold">新增花费记录</h3>
            <button id="close-modal" class="text-neutral hover:text-dark p-1 transition-custom">
                <i class="fa fa-times"></i>
            </button>
        </div>

        <form id="record-form" class="p-5 space-y-4">
            <input type="hidden" id="record-id">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="category" class="block text-sm font-medium text-neutral mb-1">品类 <span class="text-danger">*</span></label>
                    <input type="text" id="category" required placeholder="例如：洗衣机、空调" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div>
                    <label for="brand" class="block text-sm font-medium text-neutral mb-1">品牌 </label>
                    <input type="text" autocomplete="off" id="brand"  placeholder="例如：东鹏、立邦" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div>
                    <label for="model" class="block text-sm font-medium text-neutral mb-1">型号</label>
                    <input type="text" autocomplete="off" id="model" placeholder="产品型号" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div>
                    <label for="specifications" class="block text-sm font-medium text-neutral mb-1">规格</label>
                    <input type="text" autocomplete="off" id="specifications" placeholder="例如：800*800mm、18L/桶" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div>
                    <label for="price" class="block text-sm font-medium text-neutral mb-1">单价（元） <span class="text-danger">*</span></label>
                    <input type="number" autocomplete="off" id="price" required min="0" step="0.01" placeholder="0.00" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div>
                    <label for="quantity" class="block text-sm font-medium text-neutral mb-1">数量 <span class="text-danger">*</span></label>
                    <input type="number" autocomplete="off" id="quantity" required min="0" step="0.01" placeholder="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div>
                    <label for="unit" class="block text-sm font-medium text-neutral mb-1">单位 <span class="text-danger">*</span></label>
                    <input type="text" autocomplete="off" id="unit" required placeholder="例如：片、桶、㎡" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div style="display: none;">
                    <label for="totalPrice" class="block text-sm font-medium text-neutral mb-1">总计（元）</label>
                    <input type="number" autocomplete="off" id="totalPrice" readonly min="0" step="0.01" placeholder="自动计算" class="w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>

                <div>
                    <label for="status" class="block text-sm font-medium text-neutral mb-1">状态 <span class="text-danger">*</span></label>
                    <select id="status" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                        <option value disabled selected>请选择状态</option>
                        <option value="已下单">已下单</option>
                        <option value="运输中">运输中</option>
                        <option value="已延期">已延期</option>
                        <option value="已收货">已收货</option>
                        <option value="已使用">已使用</option>
                        <option value="已完成">已完成</option>
                    </select>
                </div>

                <div class="md:col-span-2">
                    <label for="time" class="block text-sm font-medium text-neutral mb-1">记录时间 <span class="text-danger">*</span></label>
                    <input type="date" autocomplete="off" id="time" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                </div>
                <div class="md:col-span-2">
                    <label for="remark" class="block text-sm font-medium text-neutral mb-1">备注信息</label>
                    <textarea id="remark" autocomplete="off" rows="3" placeholder="添加备注信息（如购买地点、优惠信息等）" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom"></textarea>
                </div>
            </div>

            <div class="pt-2 flex justify-end gap-3">
                <button type="button" id="cancel-btn" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-light transition-custom">取消</button>
                <button type="button" id="saveRecord" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-custom">保存记录</button>
            </div>
        </form>
    </div>
</div>

<!-- 确认对话框 -->
<div id="confirm-modal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-lg w-full max-w-md p-6">
        <h3 class="text-lg font-semibold mb-3">确认操作</h3>
        <p id="confirm-message" class="text-neutral mb-5">您确定要执行此操作吗？</p>
        <div class="flex justify-end gap-3">
            <button id="confirm-cancel" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-light transition-custom">取消</button>
            <button id="confirm-ok" class="px-4 py-2 bg-danger text-white rounded-lg hover:bg-danger/90 transition-custom">确认</button>
        </div>
    </div>
</div>

<!-- 通知提示 -->
<div id="toast" class="fixed top-4 right-0 z-50 px-4 py-3 rounded-lg shadow-lg transform translate-x-full transition-all duration-300 flex items-center gap-2">
    <i id="toast-icon" class="fa fa-check-circle text-secondary"></i>
    <span id="toast-message">操作成功</span>
</div>

<script>

</script>
</body>
</html>